<!DOCTYPE html>
<html lang="en">


  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <title>how to fetch data from database in node js and display in html</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <style type="text/css">
      .contain{
        padding-left: 5%;
        padding-right: 5%;
      }
      .right{
        float: right;
        padding-right: 5%;
      }
    </style>
  </head>



  <body>  
  <div class="contain">

      <% if(Flag==true){  %>
          <h1>Error</h1>
          <h3><%=data%></h3>
          <br><br>
      <% }else{  %>


      <br>
      <table class="table">

        <thead class="thead-dark">
            <%  if(data.fields.length>0){  %>
                <tr>
                    <th scope="row">SL NO</th>
                <%  for(var i = 0; i< data.fields.length; i++) {%>
                  <th><%= data.fields[i].name%></th>                                        
                <%  } %>
                <th>Options</th>
                </tr>
                <%  } %>
        </thead>

        <tbody>
          <% if(data.rows.length>0){
    
          for(var i = 0; i< data.rows.length; i++) {
            %>  
          <tr>

            <th scope="row"><%= (i+1) %></th>
            <% for (const item in data.rows[i]) { %>
              <td><%= data.rows[i][item]%></td> 
            <% } %>
            <%
              var str=""
              pk.forEach((j)=>{
                  str+=data.rows[i][j.column_name]+","
              })
              str= str.slice(0, -1);
              console.log(str)
            %>
            
            <td>
              <a href="http://localhost:3000/Edit/<%=str%>"><button type="button" class="btn btn-secondary">Edit</button></a>
              <a href="http://localhost:3000/Del/<%=str%>"><button type="button" class="btn btn-danger">Delete</button></a>
            </td>
          </tr>
          <% }
                  
          }else{ %>
              <tr>
                  <td colspan="3"><%= data %></td>
              </tr>
            <% } %>    
          
        </tbody>
        
      </table>


      <% } %>
      <a  href='http://localhost:3000/Insert'><button class="btn btn-primary">ADD</button></a>
      <a class="right" href='http://localhost:3000/Home'><button class="btn btn-primary">BACK</button></a>

  </div>
  </body>
</html>